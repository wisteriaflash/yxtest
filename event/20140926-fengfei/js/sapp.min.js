var sapp=(function(){var b={},a={};a.move=function(c){event.preventDefault();},a.start=function(c){a.ox=c.clientX||c.changedTouches[0].clientX;a.oy=c.clientY||c.changedTouches[0].clientY;},a.end=function(f){a.nx=f.clientX||f.changedTouches[0].clientX;a.ny=f.clientY||f.changedTouches[0].clientY;var d=a.nx-a.ox,c=a.ny-a.oy;if(d*d+c*c<25){return;}if(Math.abs(d)>Math.abs(c)){sapp.event.call("swipe",{dir:(d>0?"swipeRight":"swipeLeft")});}else{sapp.event.call("swipe",{dir:(c>0?"swipeDown":"swipeUp")});}};document.addEventListener("touchstart",a.start);document.addEventListener("touchmove",a.move);document.addEventListener("touchend",a.end);document.addEventListener("mousedown",a.start);document.addEventListener("mouseup",a.end);document.onmousewheel=function(c){sapp.event.call("swipe",{dir:(c.wheelDelta>0?"swipeDown":"swipeUp")});};return b;})();sapp.init=function(a){var f=$(a.page),e={},b=false;sapp.page={now:-1,out:-1,length:f.length,next:function(){if(b){return;}var g=this.now+1<=this.length;if(g){this.go(this.now+1);}sapp.event.call("pageNext",{page:this.now,notEdge:g});},prev:function(){if(b){return;}var g=this.now-1>=1;if(g){this.go(this.now-1);}sapp.event.call("pagePrev",{page:this.now,notEdge:g});},go:function(h){if(b){return;}h=parseInt(h)||1;if(h==this.now||h<1||this.length<h){return;}var l=e[this.out],k=e[this.now];this.out=this.now;this.now=h;if(l){l.sec.removeClass("out");}if(k){k.sec.removeClass("in").addClass("out");}e[h].sec.addClass("in");for(var j=0;j<a.preload;j++){var g=h+j;if(g>this.length){break;}e[g].load();}sapp.event.call("pageGo",{page:this.now});sapp.page.lock();setTimeout(sapp.page.unlock,1000);},lock:function(){b=true;},unlock:function(){b=false;}};for(var c=0;c<sapp.page.length;c++){var d={index:c+1,sec:f.eq(c),main:f.eq(c).children(".main"),loaded:false};d.name=d.sec.attr("id");d.load=function(){if(!this.loaded){this.loaded=true;this.sec.addClass("onload");}return d;};sapp.page[d.name]=d;e[d.index]=d;if(d.index<=a.preload){d.load();}}e[sapp.page.length].load();};sapp.event=(function(){var b={},a={};a.pool={};b.call=function(d,g){var c=a.getPool(d).listeners;for(var f in c){c[f](g||{});}};b.on=function(d,e){var c=a.getPool(d).listeners,f=a.getFuncPos(c,e);if(typeof e=="function"&&f==-1){c.push(e);}return b;};b.off=function(d,e){var c=a.getPool(d).listeners,f=a.getFuncPos(c,e);if(f!=-1){c.splice(f,1);}return b;};a.getFuncPos=function(e,d){for(var c in e){if(e[c]===d){return c;}}return -1;};a.getPool=function(c){a.pool[c]=a.pool[c]||{listeners:[]};return a.pool[c];};return b;})();sapp.ua=(function(){var a;var c=navigator.userAgent.toLowerCase();var b=function(d){return c.indexOf(d)!=-1;};a={toString:function(){return c;},weixin:b("micromessenger"),uc:b("ucbrowser"),ucweb:b("ucweb"),android:b("android"),ipad:b("ipad"),iphone:b("iphone"),ios:b("ipad")||b("iphone")||b("ipod")};return a;})();sapp.sound=(function(){var b={},a={};a.pool={};b.add=function(f,c){var e=f.split(/\/|\./);var d=e[e.length-2];a.pool[d]=$.extend(new Audio(f),{preload:true},c);$(a.pool[d]).on("ended",function(g){g.target.currentTime=0;if(g.target.currentTime){g.target.src=g.target.src;}if(g.target.loop){g.target.play();}else{g.target.pause();if(a.bgmusic&&a.bgmusicPlaying){a.bgmusic.play();}}});};b.play=function(f,d){if(!f||f=="bgmusic"){if(a.bgmusic){a.bgmusicPlaying=true;a.bgmusic.play();}return;}var c=a.pool[f];if(!c){return;}try{c.currentTime=d||0;}catch(g){}if(a.bgmusic){a.bgmusic.pause();}c.play();};b.pause=function(d){if(!d||d=="bgmusic"){if(a.bgmusic){a.bgmusicPlaying=false;a.bgmusic.pause();}for(var e in a.pool){a.pool[e].pause();}return;}var c=a.pool[d];if(c){c.pause();}if(a.bgmusic&&a.bgmusicPlaying){a.bgmusic.play();}};b.bgmusic=function(d,c){a.bgmusic=$.extend(new Audio(d),{preload:true,loop:true,autoplay:true,},c);a.bgmusicPlaying=a.bgmusic.autoplay;};return b;})();sapp.fill=function(b){var d={width:"100% 0%",height:"0% 100%",cover:"0% 0%",contain:"100% 100%"};b=$.extend({width:640,height:960,mode:"100% 100%"},b);var a=$(b.target),c=$(window);b.mode=(d[b.mode]||b.mode).split(" ");b.mode[1]=b.mode[1]||b.mode[0];$(window).resize(function(){var e=c.width()/b.width,i=c.height()/b.height,g=Math.max(e,i),j=Math.min(e,i),k=e/parseInt(b.mode[0])*100,f=i/parseInt(b.mode[1])*100,h=Math.min(k,f,g);a.css({width:parseInt(h*b.width),height:parseInt(h*b.height)});}).resize();};